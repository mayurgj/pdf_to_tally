# -*- coding: utf-8 -*-
issuer: CYAN PROCESS AUTOMATION
keywords:
  - Purchase Order
  - CYAN PROCESS AUTOMATION
required_fields:
  - order_number
  - date
fields:
  order_number:
    parser: regex
    regex:
      - Purchase\s+Order\#\s*:\s*(CPA\s*-\s*PO-\d+)
  date:
    parser: regex
    regex:
      - Date\s*:\s*(\d{2}\/\d{2}\/\d{4})
    type: date
  delivery_date: 
    parser: static
    value: "null"
  payment_terms:
    parser: regex
    regex:
      - Payment\s+Terms:\s+([^\n]+)
  bill_to:
    parser: regex
    regex:
      - below\s*mentioned\s*address\s*[:\s]+([\s\S]+?)\s+All\s+the\s+Terms
  ship_to:
    parser: regex
    regex:
      - below\s*mentioned\s*address\s*[:\s]+([\s\S]+?)\s+All\s+the\s+Terms
  gst_code:
    parser: static
    value: 36
    type: int
  tax_amount:
    parser: regex
    regex:
      - IGST\d+\s*\(\d+%\)\s+([0-9,]+\.\d{2})
    type: float
  total_amount:
    parser: regex
    regex:
      - IGST\d+\s*\(\d+%\)\s+[0-9,]+\.\d{2}\s+Total\s+([0-9,]+\.\d{2})
    type: float
  lines:
    parser: lines
    start: '#\s+Description\s+HSN\/\SAC\s+Qty\s+Rate\s+Amount\s+'
    end: '\s+Sub\s+Total'
    first_line:
      - (?P<line_no>^\d{1,3})\s+(?P<description>.+?)(?P<due_on>)\d{4,8}\s+(?P<quantity>[0-9,]+\.\d{2,4})\s+(?P<rate>[0-9,]+\.\d{2})(?P<discount>)\s+(?P<value>[0-9,]+\.\d{2})
    line:
      - '\s+(?P<description>.+)$'
    types:
      line_no: int
      due_on: date
      quantity: int
      rate: float
      discount: float
      value: float
options:
  currency: INR
  date_formats:
    - "%d/%m/%Y"
  languages: 
    - en
